<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>References - FHIR v1.7.0</title>

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="author" content="http://hl7.org/fhir"/>

  <link rel="stylesheet" href="fhir.css"/>
  <link rel="Prev" href="http://hl7.org/fhir/references.html"/>

    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="./dist/css/bootstrap.css"/>
  <link rel="stylesheet" href="./assets/css/bootstrap-fhir.css"/>

    <!-- Project extras -->
  <link rel="stylesheet" href="./assets/css/project.css"/>
  <link rel="stylesheet" href="./assets/css/pygments-manni.css"/>
	<link rel="stylesheet" href="jquery-ui.css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- [if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond.min.js"></script>
  <![endif] -->

    <!-- Favicons -->
  <link sizes="144x144" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-144-precomposed.png"/>
  <link sizes="114x114" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-114-precomposed.png"/>
  <link sizes="72x72" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="./assets/ico/favicon.png"/>

</head>
<body>
	<div id="segment-header" class="segment">  <!-- segment-header -->	
		<div class="container">  <!-- container -->
			<a no-external="true" id="logo" href="http://hl7.org/fhir"><img src="./assets/images/fhir-logo-www.png" alt="logo fhir"/> </a>
			<div id="hl7-status">
				<b>Current Build</b>
			</div>       	
			
			<div id="hl7-nav">
				 <a no-external="true" id="hl7-logo" href="http://www.hl7.org">
					<img src="./assets/images/hl7-logo.png" width="42" alt="visit the hl7 website" height="50"/>
				</a> 
			</div>       	
			<div id="hl7-nav"><a no-external="true" id="hl7-logo" href="http://hl7.org/fhir/search.cfm"><img src="./assets/images/search.png" alt="Search FHIR"/></a></div> 
		</div>
		<div class="container">  <!-- container -->
	</div></div>  <!-- /segment-header -->	


	<div id="segment-navbar" class="segment">  <!-- segment-navbar -->
		<div id="stripe"> </div>
		<div class="container">  <!-- container -->
   <!-- HEADER CONTENT -->
 	      		 	      		      		
			<nav class="navbar navbar-inverse">
				<div class="container">
					<button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
					</button>
					<a href="index.html" class="navbar-brand hidden">FHIR</a>
					<div class="nav-collapse collapse navbar-inverse-collapse">
						<ul class="nav navbar-nav">
              <li><a href="./index.html">Home</a></li>
              <li><a href="./modules.html">Getting Started</a></li>
              <li><a href="./documentation.html">Documentation</a></li>
              <li><a href="./resourcelist.html">Resources</a></li>
              <li><a href="./profilelist.html">Profiles</a></li>
              <li><a href="./extensibility-registry.html">Extensions</a></li>
              <li><a href="./operationslist.html">Operations</a></li>
              <li><a href="./servicelist.html">Services</a></li>
						</ul>
					</div>  <!-- /.nav-collapse -->
				</div>  <!-- /.container -->
			</nav>  <!-- /.navbar -->
      		
  <!-- /HEADER CONTENT -->				
		</div>  <!-- /container -->
	</div>  <!-- /segment-navbar -->
	

	<div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
		<div class="container">  <!-- container -->	
			<ul class="breadcrumb">
        <li><a href="foundation-module.html"><img src="foundation.png"/> Foundation</a></li>
        <li><b>References</b></li>          <!-- references.html / page / -->

			</ul>	
		</div>  <!-- /container -->
	</div>  <!-- /segment-breadcrumb -->
	

	<div id="segment-content" class="segment">  <!-- segment-content -->
	<div class="container">  <!-- container -->
            <div class="row">
            	<div class="inner-wrapper">
  <!-- CONTENT CONTENT -->


<div class="col-9">

<ul class="nav nav-tabs"><li class="active"><a href="#">References</a></li><li><a href="references-definitions.html">Detailed Descriptions</a></li></ul>


<a name="Reference"> </a>
<a name="reference"> </a>
<a name="Resource"> </a>
<a name="references"> </a>
<a name="Identification"> </a>
<h2 class="self-link-parent"><span class="sectioncount">2.18.0<a name="2.18.0"> </a></span> Resource References <a href="references.html#2.18.0" title="link to here" class="self-link"><img src="assets/images/link.svg" width="20" class="self-link" height="20"/></a></h2>
<table class="cols"><tr><td id="wg"><a href="http://www.hl7.org/Special/committees/fiwg/index.cfm" _target="blank">FHIR Infrastructure <img src="external.png" style="text-align: baseline"/></a> Work Group</td><td id="fmm"><a href="resource.html#maturity">Maturity Level</a>: 3</td><td id="ballot"><a href="help.html#status">Ballot Status</a>: <a href="history.html#pubs">STU 3</a></td></tr></table>

<p>
Many of the defined elements in a resource are references to other resources. Using these
references, the resources combine to build a web of information about healthcare.
</p>
<p>
Resources contain two types of references:
</p>
<ul>
 <li><b>Internal &quot;contained&quot; references</b> - references to other resources packaged inside the source resource</li>
 <li><b>External references</b> - references to resources found elsewhere</li>
</ul>
<p>
References are always defined and represented in one particular direction - from one resource (source) to another (target).
References are either provided as a literal URL, which may either be absolute or relative, or as a logical identifier. 
Resolving the references is discussed below.
</p>
<p>
The corresponding reverse relationship from the target to the source exists in a logical sense, but is
not represented explicitly in the target resource. For external references, navigating these reverse relationships requires some
external infrastructure to track the relationship between resources (the <a href="http.html">REST API</a> provides one such
infrastructure by providing the ability to <a href="http.html#search">search</a> the reverse relationship by naming
search parameters for the references, and by providing support for <a href="search.html#revinclude">reverse includes</a>).
</p>
<p>
Because resources are processed independently, relationships are not considered to be transitive.
For example, if a <a href="condition.html">Condition</a> resource references a particular
<a href="patient.html">Patient</a> as its subject, and references a <a href="procedure.html">Procedure</a>
resource as its cause, there is no automatic rule or implication that the procedure
has the same patient for its subject. Instead, the subject of the procedure must be established
directly in the Procedure resource itself. Another way to state this is that the context of the subject
is not &quot;inherited&quot;, nor does it &quot;conduct&quot; along the relationship to procedure.
The only exception to this is the case of contained resources (see below). Note that in
practice, the relationships need to describe a logical and coherent record, and in the
case of the Condition and Procedure described here, they would usually be required to have
the same patient for their subjects, and profiles may make rules about this.
</p>

<p>
In a resource, references are represented with a <code>reference</code> (literal reference), 
an <code>identifier</code> (logical reference), and a <code>display</code> (text description of target).
</p>

<div id="tabs-Reference">
 <ul>
  <li><a href="#tabs-Reference-struc">Structure</a></li>
  <li><a href="#tabs-Reference-uml">UML</a></li>
  <li><a href="#tabs-Reference-xml">XML</a></li>
  <li><a href="#tabs-Reference-json">JSON</a></li>
  <li><a href="#tabs-Reference-ttl">Turtle</a></li>
  <li><a href="#tabs-Reference-diff">R2 Diff</a></li>
  <li><a href="#tabs-Reference-all">All</a></li>
 </ul>
 <div id="tabs-Reference-struc">
  <div id="tbl">
   <p><b>Structure</b></p>
   <div id="tbl-inner">
    <table border="0" cellpadding="0" cellspacing="0" style="border: 0px; font-size: 11px; font-family: verdana; vertical-align: top;"><tr style="border: 1px #F0F0F0 solid; font-size: 11px; font-family: verdana; vertical-align: top;"><th style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="The logical name of the element">Name</a></th><th style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Information about the use of the element">Flags</a></th><th style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Minimum and Maximum # of times the the element can appear in the instance">Card.</a></th><th style="width: 100px" class="hierarchy"><a href="formats.html#table" title="Reference to the type of the element">Type</a></th><th style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Additional information about the element">Description &amp; Constraints</a><span style="float: right"><a href="formats.html#table" title="Legend for this format"><img src="help16.png" alt="doco" style="background-color: inherit"/></a></span></th></tr><tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck1.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_element.gif" alt="." style="background-color: white; background-color: inherit" title="Element" class="hierarchy"/> <a href="references-definitions.html#Reference" title="Reference : A reference from one resource to another.">Reference</a><a name="Reference"> </a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><span style="padding: 3px" title="This element is included in summaries">Σ</span><span style="padding: 3px" title="This element has or is affected by some invariants">I</span></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"/><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="element.html">Element</a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">A reference from one resource to another<br/><span style="font-style: italic" title="ref-1">SHALL have a contained resource if a local reference is provided</span></td></tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_primitive.png" alt="." style="background-color: white; background-color: inherit" title="Primitive Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.reference" title="Reference.reference : A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources.">reference</a><a name="Reference.reference"> </a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><span style="padding: 3px" title="This element is included in summaries">Σ</span><span style="padding: 3px" title="This element has or is affected by some invariants">I</span></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#string">string</a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">Literal reference, Relative, internal or absolute URL</td></tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_datatype.gif" alt="." style="background-color: white; background-color: inherit" title="Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.identifier" title="Reference.identifier : An identifier for the other resource. This is used when there is no way to reference the other resource directly, either because the entity is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location.">identifier</a><a name="Reference.identifier"> </a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><span style="padding: 3px" title="This element is included in summaries">Σ</span></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#Identifier">Identifier</a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">Logical reference, when literal reference is not known</td></tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck00.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin_end.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_primitive.png" alt="." style="background-color: white; background-color: inherit" title="Primitive Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.display" title="Reference.display : Plain text narrative that identifies the resource in addition to the resource reference.">display</a><a name="Reference.display"> </a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><span style="padding: 3px" title="This element is included in summaries">Σ</span></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#string">string</a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">Text alternative for the resource</td></tr>
<tr><td colspan="5" class="hierarchy"><br/><a href="formats.html#table" title="Legend for this format"><img src="help16.png" alt="doco" style="background-color: inherit"/> Documentation for this format</a></td></tr></table>
   </div>
  </div>
 </div>

 <div id="tabs-Reference-uml">
  <div id="uml">
   <p><b>UML Diagram</b> (<a href="formats.html#uml">Legend</a>)</p>
   <div id="uml-inner">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="492.0" version="1.1" height="98.0">  <defs>
    <filter x="0" width="200%" y="0" id="shadow1" height="200%">
      <feOffset result="offOut" dx="3" in="SourceGraphic" dy="3"/>
      <feColorMatrix result="matrixOut" in="offOut" values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0" type="matrix"/>
      <feGaussianBlur result="blurOut" stdDeviation="2" in="matrixOut"/>
      <feBlend mode="normal" in="SourceGraphic" in2="blurOut"/>
    </filter>
  </defs><g><rect filter="url(#shadow1)" rx="4" ry="4" x="0.0" width="114.4" y="0.0" style="fill:#f0f8ff;stroke:black;stroke-width:1" height="46.0"/><text x="57.2" y="20.0" fill="black" class="diagram-class-title">Element</text><line y1="28.0" x1="0.0" y2="28.0" x2="114.4" style="stroke:dimgrey;stroke-width:1"/><text x="6.0" y="42.0" fill="black" class="diagram-class-detail"><a xlink:href="extensibility.html"><title>Extensions - as described for all elements: additional information that is not part of the basic definition of the resource / type</title>extension</a> : <a xlink:href="extensibility.html">Extension</a> 0..*</text><g><rect filter="url(#shadow1)" rx="4" ry="4" x="160.0" width="132.0" y="0.0" style="fill:#f0f8ff;stroke:black;stroke-width:1" height="78.0"/><line y1="28.0" x1="160.0" y2="28.0" x2="292.0" style="stroke:dimgrey;stroke-width:1"/><text x="226.0" y="20.0" fill="black" class="diagram-class-title"><a xlink:href="references.html#reference">Reference</a></text><text x="166.0" y="42.0" fill="black" class="diagram-class-detail"><a xlink:href="references-definitions.html#Reference.reference"><title>A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources</title>reference</a> : <a xlink:href="datatypes.html#string">string</a> [0..1]</text><text x="166.0" y="56.0" fill="black" class="diagram-class-detail"><a xlink:href="references-definitions.html#Reference.identifier"><title>An identifier for the other resource. This is used when there is no way to reference the other resource directly, either because the entity is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location</title>identifier</a> : <a xlink:href="datatypes.html#Identifier">Identifier</a> [0..1]</text><text x="166.0" y="70.0" fill="black" class="diagram-class-detail"><a xlink:href="references-definitions.html#Reference.display"><title>Plain text narrative that identifies the resource in addition to the resource reference</title>display</a> : <a xlink:href="datatypes.html#string">string</a> [0..1]</text></g></g><line y1="28.421800947867297" x1="114.4" y2="32.74407582938388" x2="160.0" style="stroke:navy;stroke-width:1"/><polygon transform="rotate(5.414702070955661 114.4 28.421800947867297)" style="fill:white;stroke:navy;stroke-width:1" points="114.4,28.421800947867297 122.4,34.4218009478673 122.4,22.421800947867297 114.4,28.421800947867297"/></svg>
   </div>
  </div>
 </div>

 <div id="tabs-Reference-xml">
  <div id="xml">
   <p><b>XML Template</b></p>
   <div id="xml-inner">
    <pre class="spec">
&lt;<a href="references-definitions.html#Reference" title="A reference from one resource to another." class="dict"><b>[name]</b></a> xmlns=&quot;http://hl7.org/fhir&quot;&gt; <span style="float: right"><a href="xml.html" title="Documentation for this format"><img src="help.png" alt="doco"/></a></span>
 &lt;!-- from Element: <a href="extensibility.html">extension</a> --&gt;
 &lt;<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict"><b>reference</b></a> value=&quot;[<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>]&quot;/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown" title="ref-1: SHALL have a contained resource if a local reference is provided"><b><img src="lock.png" alt="??"/> 0..1</b></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Literal reference, Relative, internal or absolute URL</a></span><span style="color: Gray"> --&gt;</span>
 &lt;<a href="references-definitions.html#Reference.identifier" title="An identifier for the other resource. This is used when there is no way to reference the other resource directly, either because the entity is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location." class="dict"><b>identifier</b></a>&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: darkgreen"><a href="datatypes.html#Identifier">Identifier</a></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Logical reference, when literal reference is not known</a></span><span style="color: Gray"> --&gt;</span>&lt;/identifier&gt;
 &lt;<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict"><b>display</b></a> value=&quot;[<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>]&quot;/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Text alternative for the resource</a></span><span style="color: Gray"> --&gt;</span>
&lt;/[name]&gt;
</pre>


   </div>
  </div>
 </div>

 <div id="tabs-Reference-json">
  <div id="json">
   <p><b>JSON Template</b></p>   <div id="json-inner">
    <pre class="spec">
{<span style="float: right"><a href="json.html" title="Documentation for this format"><img src="help.png" alt="doco"/></a></span>
  // from Element: <a href="extensibility.html">extension</a>
  &quot;<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict">reference</a>&quot; : &quot;&lt;<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>&gt;&quot;, <span style="color: Gray">//</span> <span style="color: brown" title="ref-1: SHALL have a contained resource if a local reference is provided"><b>C?</b></span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Literal reference, Relative, internal or absolute URL</a></span>
  &quot;<a href="references-definitions.html#Reference.identifier" title="An identifier for the other resource. This is used when there is no way to reference the other resource directly, either because the entity is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location." class="dict">identifier</a>&quot; : { <span style="color: darkgreen"><a href="datatypes.html#Identifier">Identifier</a></span> }, <span style="color: Gray">//</span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Logical reference, when literal reference is not known</a></span>
  &quot;<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict">display</a>&quot; : &quot;&lt;<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>&gt;&quot; <span style="color: Gray">//</span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Text alternative for the resource</a></span>
}
</pre>


   </div>
  </div>
 </div>

 <div id="tabs-Reference-ttl">
  <div id="json">
   <p><b>Turtle Template</b></p>   <div id="ttl-inner">
    <pre class="spec">
@prefix fhir: &lt;http://hl7.org/fhir/&gt; .

[
 # from Element: <a href="extensibility.html">Element.extension</a>
  fhir:<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict">Reference.reference</a><a name="ttl-reference"> </a>[ <a href="datatypes.html#string">string</a> ]; # 0..1 <span style="color: navy">Literal reference, Relative, internal or absolute URL</span>
  fhir:<a href="references-definitions.html#Reference.identifier" title="An identifier for the other resource. This is used when there is no way to reference the other resource directly, either because the entity is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location." class="dict">Reference.identifier</a><a name="ttl-identifier"> </a>[ <a href="datatypes.html#Identifier">Identifier</a> ]; # 0..1 <span style="color: navy">Logical reference, when literal reference is not known</span>
  fhir:<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict">Reference.display</a><a name="ttl-display"> </a>[ <a href="datatypes.html#string">string</a> ]; # 0..1 <span style="color: navy">Text alternative for the resource</span>
]
</pre>


   </div>
  </div>
 </div>

 <div id="tabs-Reference-diff">
  <div id="diff">
   <p><b>Changes since DSTU2</b></p>   <div id="diff-inner">
    <table class="grid">
  <tr class="diff-item">
    <td class="diff-left">Reference</td>
    <td class="diff-right"/>
  </tr>
  <tr class="diff-new">
    <td class="diff-left">Reference.identifier</td>
    <td class="diff-right">added</td>
  </tr>
</table>

<p>See the <a href="diff.html">Full Difference</a> for further information</p>

   </div>
  </div>
 </div>

 <div id="tabs-Reference-all">
  <div id="tbla">
   <a name="tbl-Reference"> </a>
   <p><b>Structure</b></p>
   <div id="tbl-inner">
    <table border="0" cellpadding="0" cellspacing="0" style="border: 0px; font-size: 11px; font-family: verdana; vertical-align: top;"><tr style="border: 1px #F0F0F0 solid; font-size: 11px; font-family: verdana; vertical-align: top;"><th style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="The logical name of the element">Name</a></th><th style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Information about the use of the element">Flags</a></th><th style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Minimum and Maximum # of times the the element can appear in the instance">Card.</a></th><th style="width: 100px" class="hierarchy"><a href="formats.html#table" title="Reference to the type of the element">Type</a></th><th style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="formats.html#table" title="Additional information about the element">Description &amp; Constraints</a><span style="float: right"><a href="formats.html#table" title="Legend for this format"><img src="help16.png" alt="doco" style="background-color: inherit"/></a></span></th></tr><tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck1.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_element.gif" alt="." style="background-color: white; background-color: inherit" title="Element" class="hierarchy"/> <a href="references-definitions.html#Reference" title="Reference : A reference from one resource to another.">Reference</a><a name="Reference"> </a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><span style="padding: 3px" title="This element is included in summaries">Σ</span><span style="padding: 3px" title="This element has or is affected by some invariants">I</span></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"/><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="element.html">Element</a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">A reference from one resource to another<br/><span style="font-style: italic" title="ref-1">SHALL have a contained resource if a local reference is provided</span></td></tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_primitive.png" alt="." style="background-color: white; background-color: inherit" title="Primitive Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.reference" title="Reference.reference : A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources.">reference</a><a name="Reference.reference"> </a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><span style="padding: 3px" title="This element is included in summaries">Σ</span><span style="padding: 3px" title="This element has or is affected by some invariants">I</span></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#string">string</a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">Literal reference, Relative, internal or absolute URL</td></tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_datatype.gif" alt="." style="background-color: white; background-color: inherit" title="Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.identifier" title="Reference.identifier : An identifier for the other resource. This is used when there is no way to reference the other resource directly, either because the entity is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location.">identifier</a><a name="Reference.identifier"> </a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><span style="padding: 3px" title="This element is included in summaries">Σ</span></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#Identifier">Identifier</a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">Logical reference, when literal reference is not known</td></tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;"><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck00.png)" class="hierarchy"><img src="tbl_spacer.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="tbl_vjoin_end.png" alt="." style="background-color: inherit" class="hierarchy"/><img src="icon_primitive.png" alt="." style="background-color: white; background-color: inherit" title="Primitive Data Type" class="hierarchy"/> <a href="references-definitions.html#Reference.display" title="Reference.display : Plain text narrative that identifies the resource in addition to the resource reference.">display</a><a name="Reference.display"> </a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><span style="padding: 3px" title="This element is included in summaries">Σ</span></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">0..1</td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy"><a href="datatypes.html#string">string</a></td><td style="vertical-align: top; text-align : left; background-color: white; padding:0px 4px 0px 4px" class="hierarchy">Text alternative for the resource</td></tr>
<tr><td colspan="5" class="hierarchy"><br/><a href="formats.html#table" title="Legend for this format"><img src="help16.png" alt="doco" style="background-color: inherit"/> Documentation for this format</a></td></tr></table>
   </div>
  </div>

  <div id="umla">
   <a name="uml-Reference"> </a>
   <p><b>UML Diagram</b> (<a href="formats.html#uml">Legend</a>)</p>
   <div id="uml-inner">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="492.0" version="1.1" height="98.0">  <defs>
    <filter x="0" width="200%" y="0" id="shadow1b" height="200%">
      <feOffset result="offOut" dx="3" in="SourceGraphic" dy="3"/>
      <feColorMatrix result="matrixOut" in="offOut" values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0" type="matrix"/>
      <feGaussianBlur result="blurOut" stdDeviation="2" in="matrixOut"/>
      <feBlend mode="normal" in="SourceGraphic" in2="blurOut"/>
    </filter>
  </defs><g><rect filter="url(#shadow1b)" rx="4" ry="4" x="0.0" width="114.4" y="0.0" style="fill:#f0f8ff;stroke:black;stroke-width:1" height="46.0"/><text x="57.2" y="20.0" fill="black" class="diagram-class-title">Element</text><line y1="28.0" x1="0.0" y2="28.0" x2="114.4" style="stroke:dimgrey;stroke-width:1"/><text x="6.0" y="42.0" fill="black" class="diagram-class-detail"><a xlink:href="extensibility.html"><title>Extensions - as described for all elements: additional information that is not part of the basic definition of the resource / type</title>extension</a> : <a xlink:href="extensibility.html">Extension</a> 0..*</text><g><rect filter="url(#shadow1b)" rx="4" ry="4" x="160.0" width="132.0" y="0.0" style="fill:#f0f8ff;stroke:black;stroke-width:1" height="78.0"/><line y1="28.0" x1="160.0" y2="28.0" x2="292.0" style="stroke:dimgrey;stroke-width:1"/><text x="226.0" y="20.0" fill="black" class="diagram-class-title"><a xlink:href="references.html#reference">Reference</a></text><text x="166.0" y="42.0" fill="black" class="diagram-class-detail"><a xlink:href="references-definitions.html#Reference.reference"><title>A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources</title>reference</a> : <a xlink:href="datatypes.html#string">string</a> [0..1]</text><text x="166.0" y="56.0" fill="black" class="diagram-class-detail"><a xlink:href="references-definitions.html#Reference.identifier"><title>An identifier for the other resource. This is used when there is no way to reference the other resource directly, either because the entity is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location</title>identifier</a> : <a xlink:href="datatypes.html#Identifier">Identifier</a> [0..1]</text><text x="166.0" y="70.0" fill="black" class="diagram-class-detail"><a xlink:href="references-definitions.html#Reference.display"><title>Plain text narrative that identifies the resource in addition to the resource reference</title>display</a> : <a xlink:href="datatypes.html#string">string</a> [0..1]</text></g></g><line y1="28.421800947867297" x1="114.4" y2="32.74407582938388" x2="160.0" style="stroke:navy;stroke-width:1"/><polygon transform="rotate(5.414702070955661 114.4 28.421800947867297)" style="fill:white;stroke:navy;stroke-width:1" points="114.4,28.421800947867297 122.4,34.4218009478673 122.4,22.421800947867297 114.4,28.421800947867297"/></svg>
   </div>
  </div>

  <div id="xmla">
   <a name="xml-Reference"> </a>
   <p><b>XML Template</b></p>
   <div id="xml-inner">
     <pre class="spec">
&lt;<a href="references-definitions.html#Reference" title="A reference from one resource to another." class="dict"><b>[name]</b></a> xmlns=&quot;http://hl7.org/fhir&quot;&gt; <span style="float: right"><a href="xml.html" title="Documentation for this format"><img src="help.png" alt="doco"/></a></span>
 &lt;!-- from Element: <a href="extensibility.html">extension</a> --&gt;
 &lt;<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict"><b>reference</b></a> value=&quot;[<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>]&quot;/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown" title="ref-1: SHALL have a contained resource if a local reference is provided"><b><img src="lock.png" alt="??"/> 0..1</b></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Literal reference, Relative, internal or absolute URL</a></span><span style="color: Gray"> --&gt;</span>
 &lt;<a href="references-definitions.html#Reference.identifier" title="An identifier for the other resource. This is used when there is no way to reference the other resource directly, either because the entity is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location." class="dict"><b>identifier</b></a>&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: darkgreen"><a href="datatypes.html#Identifier">Identifier</a></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Logical reference, when literal reference is not known</a></span><span style="color: Gray"> --&gt;</span>&lt;/identifier&gt;
 &lt;<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict"><b>display</b></a> value=&quot;[<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>]&quot;/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: navy"><a style="color: navy" href="terminologies.html#unbound">Text alternative for the resource</a></span><span style="color: Gray"> --&gt;</span>
&lt;/[name]&gt;
</pre>


   </div>
  </div>

  <div id="jsona">
   <a name="json-Reference"> </a>
   <p><b>JSON Template</b></p>
   <div id="json-inner">
     <pre class="spec">
{<span style="float: right"><a href="json.html" title="Documentation for this format"><img src="help.png" alt="doco"/></a></span>
  // from Element: <a href="extensibility.html">extension</a>
  &quot;<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict">reference</a>&quot; : &quot;&lt;<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>&gt;&quot;, <span style="color: Gray">//</span> <span style="color: brown" title="ref-1: SHALL have a contained resource if a local reference is provided"><b>C?</b></span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Literal reference, Relative, internal or absolute URL</a></span>
  &quot;<a href="references-definitions.html#Reference.identifier" title="An identifier for the other resource. This is used when there is no way to reference the other resource directly, either because the entity is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location." class="dict">identifier</a>&quot; : { <span style="color: darkgreen"><a href="datatypes.html#Identifier">Identifier</a></span> }, <span style="color: Gray">//</span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Logical reference, when literal reference is not known</a></span>
  &quot;<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict">display</a>&quot; : &quot;&lt;<span style="color: darkgreen"><a href="datatypes.html#string">string</a></span>&gt;&quot; <span style="color: Gray">//</span> <span style="color: navy; opacity: 0.8"><a style="color: navy; opacity: 0.8" href="terminologies.html#unbound">Text alternative for the resource</a></span>
}
</pre>


   </div>
  </div>
  <div id="ttla">
   <a name="ttl-Reference"> </a>
   <p><b>Turtle Template</b></p>
   <div id="ttl-inner">
     <pre class="spec">
@prefix fhir: &lt;http://hl7.org/fhir/&gt; .

[
 # from Element: <a href="extensibility.html">Element.extension</a>
  fhir:<a href="references-definitions.html#Reference.reference" title="A reference to a location at which the other resource is found. The reference may be a relative reference, in which case it is relative to the service base URL, or an absolute URL that resolves to the location where the resource is found. The reference may be version specific or not. If the reference is not to a FHIR RESTful server, then it should be assumed to be version specific. Internal fragment references (start with '#') refer to contained resources." class="dict">Reference.reference</a><a name="ttl-reference"> </a>[ <a href="datatypes.html#string">string</a> ]; # 0..1 <span style="color: navy">Literal reference, Relative, internal or absolute URL</span>
  fhir:<a href="references-definitions.html#Reference.identifier" title="An identifier for the other resource. This is used when there is no way to reference the other resource directly, either because the entity is not available through a FHIR server, or because there is no way for the author of the resource to convert a known identifier to an actual location." class="dict">Reference.identifier</a><a name="ttl-identifier"> </a>[ <a href="datatypes.html#Identifier">Identifier</a> ]; # 0..1 <span style="color: navy">Logical reference, when literal reference is not known</span>
  fhir:<a href="references-definitions.html#Reference.display" title="Plain text narrative that identifies the resource in addition to the resource reference." class="dict">Reference.display</a><a name="ttl-display"> </a>[ <a href="datatypes.html#string">string</a> ]; # 0..1 <span style="color: navy">Text alternative for the resource</span>
]
</pre>


   </div>
  </div>
  <div id="diffa">
   <a name="diff-Reference"> </a>
   <p><b>Changes since DSTU2</b></p>
   <div id="diff-inner">
     <table class="grid">
  <tr class="diff-item">
    <td class="diff-left">Reference</td>
    <td class="diff-right"/>
  </tr>
  <tr class="diff-new">
    <td class="diff-left">Reference.identifier</td>
    <td class="diff-right">added</td>
  </tr>
</table>

<p>See the <a href="diff.html">Full Difference</a> for further information</p>

   </div>
  </div>
 </div>
</div>


<p>&nbsp;</p>


<div class="use">
<p><b>Constraints</b></p>
<p>
At least one of <code>reference</code>, <code>identifier</code> and <code>display</code> SHALL be present (unless an extension is provided).
</p>
<p>
<a name="Reference-inv"> </a><ul><li><b title="Formal Invariant Identifier">ref-1</b>: SHALL have a contained resource if a local reference is provided (<a href="http://hl7.org/fluentpath">expression <img src="external.png" style="text-align: baseline"/></a>: <span style="font-family: Courier New, monospace">reference.startsWith('#').not() or (reference.substring(1).trace('url') in %resource.contained.id.trace('ids'))</span>)</li></ul>
</p>
</div>

<a name="literal"> </a>
<h3 class="self-link-parent"><span class="sectioncount">2.18.0.1</span> Literal References <a href="references.html#literal" title="link to here" class="self-link"><img src="assets/images/link.svg" width="20" class="self-link" height="20"/></a></h3>

<p>
The <code>reference</code> is the key element - resources are identified and addressed by their URL. It  
contains a url that is either
</p>
<ul>
  <li>an absolute URL</li>
  <li>a relative URL, which is relative to the <a href="http.html#root">Service Base URL</a>, or, in a bundle, the <code>Bundle.entry.fullUrl</code> (see <a href="bundle.html#references">Resolving References in Bundles</a>)</li>
  <li>an internal fragment reference (see &quot;Contained Resources&quot; below)</li>
</ul>
<p>
Notes:
</p>
<ul>
 <a name="regex"> </a>
 <li>Using absolute URLs provides a stable, scalable approach suitable for a cloud/web context, while using relative/logical references provides a
   flexible approach suitable for use when trading across closed ecosystem boundaries. (see <a href="managing.html">&quot;Managing Resource Identity&quot;</a> for further discussion)</li>
 <li>Absolute URLs do not need to point to a <a href="http.html">FHIR RESTful server</a>, though this is the preferred approach.
   Whether or not the reference is to a FHIR RESTful server, the reference SHALL point to a Resource as defined by this specification. 
   <br/>Note: This regex is true if the reference to a resource is consistent with a FHIR API:
   <pre>
   ((http|https)://([A-Za-z0-9\\\/\.\:\%\$])*)?(Account|ActivityDefinition|ActivityGroup|AllergyIntolerance|Appointment|AppointmentResponse|AuditEvent|Basic|Binary|BodySite|Bundle|CapabilityStatement|CarePlan|CareTeam|Claim|ClaimResponse|ClinicalImpression|CodeSystem|Communication|CommunicationRequest|CompartmentDefinition|Composition|ConceptMap|Condition|Consent|Contract|Coverage|DataElement|DecisionSupportServiceModule|DetectedIssue|Device|DeviceComponent|DeviceMetric|DeviceUseRequest|DeviceUseStatement|DiagnosticReport|DiagnosticRequest|DocumentManifest|DocumentReference|EligibilityRequest|EligibilityResponse|Encounter|Endpoint|EnrollmentRequest|EnrollmentResponse|EpisodeOfCare|ExpansionProfile|ExplanationOfBenefit|FamilyMemberHistory|Flag|Goal|Group|GuidanceResponse|HealthcareService|ImagingManifest|ImagingStudy|Immunization|ImmunizationRecommendation|ImplementationGuide|Library|Linkage|List|Location|Measure|MeasureReport|Media|Medication|MedicationAdministration|MedicationDispense|MedicationRequest|MedicationStatement|MessageHeader|NamingSystem|NutritionRequest|Observation|OperationDefinition|OperationOutcome|Organization|Patient|PaymentNotice|PaymentReconciliation|Person|PlanDefinition|Practitioner|PractitionerRole|Procedure|ProcedureRequest|ProcessRequest|ProcessResponse|Provenance|Questionnaire|QuestionnaireResponse|ReferralRequest|RelatedPerson|RiskAssessment|Schedule|SearchParameter|Sequence|ServiceDefinition|Slot|Specimen|StructureDefinition|StructureMap|Subscription|Substance|SupplyDelivery|SupplyRequest|Task|TestReport|TestScript|ValueSet|VisionPrescription)\/[A-Za-z0-9\-\.]{1,64}(\/_history\/[A-Za-z0-9\-\.]{1,64})?
   </pre>
   <br/>
   However conformance with this regex is no guarantee that the end-point is a FHIR server
   </li>
 <li>URLs are always considered to be case-sensitive</li>
</ul>
<div class="example">
<p>A relative reference to the <a href="patient.html">Patient</a> &quot;034AB16&quot; in an element named <code>context</code> on a FHIR RESTful server:</p>
<pre fragment="Reference" class="xml">
  &lt;patient&gt;
    &lt;reference value=&quot;Patient/034AB16&quot; /&gt;
  &lt;/patient&gt;
</pre>
<p>An absolute reference to a <a href="structuredefinition.html">Structure Definition</a> in an element named <code>profile</code>:</p>
<pre fragment="Reference" class="xml">
  &lt;profile&gt;
    &lt;reference value=&quot;http://fhir.hl7.org/svc/StructureDefinition/c8973a22-2b5b-4e76-9c66-00639c99e61b&quot; /&gt;
  &lt;/profile&gt;
</pre>
</div>

<a name="logical"> </a>
<h3 class="self-link-parent"><span class="sectioncount">2.18.0.2</span> Logical References <a href="references.html#logical" title="link to here" class="self-link"><img src="assets/images/link.svg" width="20" class="self-link" height="20"/></a></h3>

<p>
In many contexts where FHIR is used, applications building a resource may know an identifier for the target 
of the reference, but there is no way for the application to convert this to a literal reference that 
directly references an actual resource. This situation may arise for several reasons:
</p>
<ul>
 <li>There is no server exposing any such resource. This is often the case with national identifiers (e.g. US SSN or NPI), and such identifiers are widely used</li>
 <li>The server that exposes the resource is not available to the source application, so it has no way to resolve an identifier to a reference</li>
 <li>The application is not in a RESTful environment - it is creating a message or a document</li>
</ul>
<p>
In this cases, the source application may provide the identifier as a logical reference to the 
entity that the target resource would describe. 
</p>

<div class="example">
<p>A logical reference to the <a href="patient.html">Patient</a> with an SSN of 000111111:</p>
<pre fragment="Reference" class="xml">
  &lt;patient&gt;
    &lt;identifier&gt;
      &lt;system value=&quot;http://hl7.org/fhir/sid/us-ssn&quot; /&gt;
      &lt;value value=&quot;000111111&quot; /&gt;
    &lt;/identifier&gt;
  &lt;/patient&gt;
</pre>
</div>

<p>
When processing a resource, an application 
may be able to use the identifier directly, on the grounds that all it needs is the identifier, 
or it may be able to resolve the identifier directly. Alternatively, it may be able to use
a server to resolve the logical reference to a literal reference to a resource. 
</p>
<p>
Irrespective of how the resolution occurs, any system processing a logical reference will only be 
able to resolve the identifier to a reference if it understands the business context in which the 
identifier is used. Sometimes this is global (e.g. a national identifier) but often it is not. 
</p>
<p>
For this reason, none of the useful mechanisms described for working with references (e.g. 
<a href="search.html#chaining">chaining</a>, <a href="search.html#include">includes</a>) are 
possible, nor should servers be expected to be able to automatically resolve the reference. 
Servers may accept an identifier based reference untouched, resolve it, and/or reject it - see 
<a href="capabilitystatement-definitions.html#CapabilityStatement.rest.resource.referencePolicy">CapabilityStatement.rest.resource.referencePolicy</a>. 
</p>
<p>
When both an identifier and a literal reference are provided, the literal reference is preferred. 
Applications processing the resource are allowed - but not required - to check that the identifier 
matches the literal reference, if they understand how to resolve the logical reference.
</p>
<p>
Applications converting a logical reference to a literal reference may choose to leave the 
logical reference present, or remove it.
</p>

<a name="display"> </a>
<h3 class="self-link-parent"><span class="sectioncount">2.18.0.3</span> Reference Description <a href="references.html#display" title="link to here" class="self-link"><img src="assets/images/link.svg" width="20" class="self-link" height="20"/></a></h3>

<p>
Irrespective of whether a literal and/or logical reference is provided, or neither, the
<code>display</code> element may be used to provide a very short description of the 
target resource. 
</p>
<div class="example">
<pre fragment="Reference" class="xml">
  &lt;custodian&gt;
    &lt;reference value=&quot;Organization/123&quot; /&gt;
    &lt;display value=&quot;HL7, Inc&quot; /&gt;
  &lt;/custodian&gt;
</pre>
<p>
This text can be used by any application that cannot resolve the reference 
to fill out the text portion of a hyperlink referring to the target resource, for instance.
It can also save time fetching a target resource, and determining how to convert it to
a very short textual description. 
</p>
</div>
<p>
In general, the <code>display</code>, if populated, does not have identical content 
to the Resource.text of the referenced resource.  The purpose is to identify what's 
being referenced, not to more fully describe it.
</p>

<h3 class="self-link-parent"><span class="sectioncount">2.18.0.4<a name="2.18.0.4"> </a></span> Canonical URLs <a href="references.html#2.18.0.4" title="link to here" class="self-link"><img src="assets/images/link.svg" width="20" class="self-link" height="20"/></a></h3>
<p>
Many resource types have a defined element &quot;url&quot; which is the canonical URL that always identifies the 
resource. These include all the conformance and knowledge resources (most of the resources 
not found in the <a href="compartmentdefinition-patient.html">Patient Compartment</a>).
</p>
<p>
The canonical URL remains the same when the resource is copied from server to server, while the logical
id of the resource - it's local identifier - usually changes as the resource is copied. The canonical
URL serves as a stable logical identifier for the conformance artifact, and <b>is the preferred 
way to reference a conformance or knowledge resource</b>. The canonical URL is also the location where the master copy of
the artifact is found. 
</p>
<p>
References to these resource may use the <code>Reference</code> type described above, 
but they can also be referenced using a <a href="datatypes.html#uri"><code>uri</code></a>.
</p>
<p>
Systems resolving references to resources that might have cannonical URLs SHOULD first
try to resolve the reference using the cannonical URL, and then fall back to direct 
resolution using the URL as a literal reference if a local version of the canonical 
resource cannot be found. This approach is safe because the local version cannot be 
a different artifact than the master copy, though implementations will need to make 
appropriate arrangements regarding the currency of their local copy of the artifact.
</p>


<a name="contained"> </a>
<h3 class="self-link-parent"><span class="sectioncount">2.18.0.5</span> Contained Resources <a href="references.html#contained" title="link to here" class="self-link"><img src="assets/images/link.svg" width="20" class="self-link" height="20"/></a></h3>
<p>
In some circumstances, the content referred to in the resource reference does not have an independent
existence apart from the resource that contains it - it cannot be identified independently, and nor
can it have its own independent transaction scope. Typically, such circumstances arise where resources
are being assembled by a secondary user of the source data, such as a middleware engine. If the data available
when the resource is constructed does not include record keys or absolute identification information, then
a properly identified resource cannot be assembled, and even if an arbitrary identification was associated
with it, the resource could never be the subject of a transaction outside the context of the resource that
refers to it.
</p>
<p>
For example, consider a situation where an interface engine is creating a <a href="condition.html">Condition</a>
record on a patient from an <a href="http://www.hl7.org/implement/standards/product_brief.cfm?product_id=185">HL7 v2 <img src="external.png" style="text-align: baseline"/></a> message, and the only information about the primary surgeon is her
first name and last name (REL-7.2 &amp; RES-7.3). In the absence of a controlled practitioner directory,
this is not enough information to create an identified <a href="practitioner.html">Practitioner</a>
resource since more than one practitioner might have the same name.
</p>
<p>
In these circumstances, the resource is placed directly in-line in the resource. <b>This SHOULD NOT be
done when the content can be identified properly, as once the identification is lost, it is extremely difficult
(and context dependent) to restore it again.</b>
</p>
<div class="example">
<p>
An example of a contained resource:
</p>
<pre class="xml">   <!-- Can't fragment test this - too incomplete -->
 &lt;Composition xmlns=&quot;http://hl7.org/fhir&quot;&gt;
  &lt;extension&gt;...&lt;/extension&gt;
  &lt;text&gt;...&lt;/text&gt;
  &lt;contained&gt;
    &lt;Organization&gt;
      &lt;id value=&quot;org1&quot;/&gt;
      &lt;!-- whatever information is available --&gt;
    &lt;/Organization&gt;
  &lt;/contained&gt;
  &lt;information&gt;
    &lt;!-- other attributes --&gt;
    &lt;custodian&gt;
      &lt;reference value=&quot;#org1&quot; /&gt;
    &lt;/custodian&gt;
    &lt;!-- other attributes --&gt;
  &lt;information&gt;
 &lt;/Composition&gt;
</pre>
<p>
The same example in JSON:
</p>
<pre class="json">
{ &quot;resourceType&quot; : &quot;Composition&quot;,
  &quot;extension&quot; : { ... },
  &quot;text&quot; : { .. },
  &quot;contained: [
    {
      &quot;resourceType&quot; : &quot;Organization&quot;,
      &quot;id&quot; : &quot;org1&quot;,
      .. whatever information is available ...
	}  ]
  &quot;information: {
    ... other attributes ...
    &quot;custodian&quot; : {
      &quot;reference&quot; : &quot;#org1&quot;
	}
    ... other attributes ...
  }
}
</pre>
</div>
<blockquote>
<div class="design-note">
<p>
Design Note: Contained resources are still a reference rather than being inlined directly
into the element that is the reference (e.g. &quot;custodian&quot; above) to ensure that a
single approach to resolving resource references can be used. Though direct containment
would seem simpler, it would still be necessary to support internal references where the
same contained resource is referenced more than once. In the end, all that it would achieve
is creating additional options in the syntax. For users using XPath to process the resource,
the following XPath fragment resolves the internal reference:
</p>
<pre>
ancestor::f:*[not(parent::f:*)]/f:contained/*[@id=substring-after(<b>current()</b>/f:reference/@value, '#')]
</pre>
</div>
</blockquote>
<p>
Some notes about use and interpretation of contained resources:
</p>

<ul>
  <li>The <code>contained</code> element SHALL NOT have extensions on it (though contained resources can still contain extensions)</li>
  <li>Contained resources share the same internal id resolution space as the parent resource (for id attributes, see below)</li>
  <li>When resolving references, refences are resolved by looking through the 'container' resource - the one that contains the other resources. Since there 
     are no nested contained resources, there is only one container resource</li>
  <li>References to contained resources are never resolved outside the container resource. Specifically, resolution stops at the elements Bundle.entry.resource and Parameters.parameter.resource, but not at DomainResource.contained</li>
  <li>Contained resources SHALL NOT contain additional contained resources</li>
  <li>Contained resources SHALL NOT contain any narrative</li>
  <li>A contained resource SHALL only be included in a resource if something in that resource (potentially another contained resource) has a reference to it</li>
</ul>

<blockquote class="dstu-note">
<a name="dstu"> </a>
<p>
<b>DSTU Note:</b>  
It might be necessary to allow for the reverse (that is, for a contained resource to reference the container). 
However this would cause many difficult consequences on the API. 
Feedback on this issue is welcome <a href="http://wiki.hl7.org/index.php?title=FHIR_Specification_Feedback_(DSTU_2)">here <img src="external.png" style="text-align: baseline"/></a>.
</p>
</blockquote>

<p>
Resources that are contained inline do not &quot;inherit&quot; context from their parent resource. For instance, if
the parent resource contains a &quot;subject&quot;, and the contained resource also has a &quot;subject&quot; element defined,
there is no implication that the contained resource has the same subject as the parent resource.
</p>
    
<p>
Resources can only be contained in other resources if there is a reference from the resource to 
the contained resource. This is intended to ensure that the meaning of the contained resource
is clear, and that there is no confusion as to its significance. 
</p>

<blockquote class="dstu-note">
<a name="dstu2"> </a>
<p>
<b>DSTU Note:</b> There are some identified use cases where it would be useful to include resources that refer
to the contained resource rather than the container referring to the contained resource, but this 
has a series of structural ramifications for the API. Whether these can be resolved is an open 
issue for investigation during the period of trial use.
</p>
<p>
Feedback is welcome <a href="http://wiki.hl7.org/index.php?title=FHIR_Specification_Feedback_(DSTU_2)">here <img src="external.png" style="text-align: baseline"/></a>.
</p>
</blockquote>

</div>


				</div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->
        
    </div>  <!-- /segment-content -->


	<div id="segment-footer" class="segment">  <!-- segment-footer -->
		<div class="container">  <!-- container -->
			<div class="inner-wrapper">
				<p>
        &copy; HL7.org 2011+. FHIR STU3 Candidate (v1.7.0-10082) generated on Thu, Oct 27, 2016 16:28+0000. <a href="qa.html">QA Page</a>
        <br/>
        <span style="color: #FFFF77">
        Links: <a style="color: #81BEF7" href="http://hl7.org/fhir/search.cfm">Search <img src="external.png" style="text-align: baseline"/></a> | 
               <a style="color: #81BEF7" href="history.html">Version History</a> | 
               <a style="color: #81BEF7" href="toc.html">Table of Contents</a> | 
               <a style="color: #81BEF7" href="http://services.w3.org/htmldiff?doc1=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Freferences.html&amp;doc2=http%3A%2F%2Fhl7-fhir.github.io%2F%2Freferences.html">Compare to DSTU2 <img src="external.png" style="text-align: baseline"/></a> |                
               <a rel="license" style="color: #81BEF7" href="license.html"><img src="cc0.png" alt="CC0" style="border-style: none;"/></a> | 
               <a style="color: #81BEF7" href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemAdd&amp;tracker_id=677" target="_blank">Propose a change <img src="external.png" style="text-align: baseline"/></a>   
        </span>
        </p>
			</div>  <!-- /inner-wrapper -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-footer -->
  <!-- disqus thread -->
  <!-- disqus -->
  <!-- end disqus -->        
	
	<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
		<div class="container">  <!-- container -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-post-footer -->
    
      <!-- JS and analytics only. -->
      <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
<script src="./assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script src="./dist/js/bootstrap.min.js"> </script>
<script src="./assets/js/respond.min.js"> </script>

<script src="./assets/js/fhir.js"> </script>

  <!-- Analytics Below
================================================== -->


  <script src="external/jquery/jquery.js"> </script>
<script src="jquery-ui.min.js"> </script>
<script>
 try {
   var currentTabIndex = sessionStorage.getItem('fhir-resource-tab-index');
 } catch(exception){
 }
 if (!currentTabIndex)
   currentTabIndex = '0';

$( '#tabs-Reference' ).tabs({ active: currentTabIndex, activate: function( event, ui ) { store(ui.newTab.index()); } });


function store(currentTab) {
  document.activeElement.blur();
  try {
    sessionStorage.setItem('fhir-resource-tab-index', currentTab);
  } catch(exception){
  }
  $( '#tabs-Reference' ).tabs('option', 'active', currentTab);
}
</script>


</body>
</html>